HOME:/home/kfutfd/qcu
-- The C compiler identification is GNU 11.4.0
-- The CXX compiler identification is GNU 11.4.0
-- The CUDA compiler identification is NVIDIA 12.4.131
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Detecting CUDA compiler ABI info
-- Detecting CUDA compiler ABI info - done
-- Check for working CUDA compiler: /usr/local/cuda/bin/nvcc - skipped
-- Detecting CUDA compile features
-- Detecting CUDA compile features - done
-- Found MPI_C: /home/kfutfd/external-libraries/openmpi-4.1.5/lib/libmpi.so (found version "3.1") 
-- Found MPI_CXX: /home/kfutfd/external-libraries/openmpi-4.1.5/lib/libmpi.so (found version "3.1") 
-- Found MPI: TRUE (found version "3.1")  
-- Configuring done
-- Generating done
-- Build files have been written to: /home/kfutfd/qcu
[  7%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/bistabcg.cu.o
[ 11%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/lattice_cuda.cu.o
[ 14%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_clover_dslash.cu.o
[ 18%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/lattice_mpi.cu.o
[ 22%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_clover_multgrid.cu.o
[ 29%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_clover_bistabcg.cu.o
[ 29%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_overlap_bistabcg.cu.o
[ 33%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_overlap_dslash.cu.o
[ 18%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/clover_dslash.cu.o
[ 44%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_wilson_bistabcg.cu.o
[ 44%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_wilson_dslash.cu.o
[ 44%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_overlap_multgrid.cu.o
[ 51%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/multgrid.cu.o
[ 51%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/mpi_wilson_multgrid.cu.o
[ 55%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/nccl_wilson_bistabcg.cu.o
[ 59%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/nccl_wilson_dslash.cu.o
[ 62%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_clover_bistabcg.cu.o
[ 70%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_clover_multgrid.cu.o
[ 74%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_overlap_bistabcg.cu.o
[ 74%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_clover_dslash.cu.o
[ 77%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_overlap_multgrid.cu.o
[ 81%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_overlap_dslash.cu.o
[ 85%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_wilson_bistabcg.cu.o
[ 88%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_wilson_multgrid.cu.o
[ 92%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/test_wilson_dslash.cu.o
[ 96%] Building CUDA object CMakeFiles/qcu.dir/src/cuda/wilson_dslash.cu.o
[100%] Linking CUDA shared library libqcu.so
[100%] Built target qcu
rm: cannot remove '.': Is a directory
rm: cannot remove '..': Is a directory
rm: cannot remove '.git': Is a directory
rm: cannot remove '"clangd.format.tabSize": 4': No such file or directory
fatal: pathspec '.gitmodules' did not match any files
~/qcu/test ~/qcu
==26722== NVPROF is profiling process 26722, command: python ./test.nccl.bistabcg.qcu-np2.py
==26721== NVPROF is profiling process 26721, command: python ./test.nccl.bistabcg.qcu-np2.py
==26722== Warning: Unified Memory Profiling is not supported on the current configuration because a pair of devices without peer-to-peer support is detected on this multi-GPU setup. When peer mappings are not available, system falls back to using zero-copy memory. It can cause kernels, which access unified memory, to run slower. More details can be found at: http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#um-managed-memory
==26721== Warning: Unified Memory Profiling is not supported on the current configuration because a pair of devices without peer-to-peer support is detected on this multi-GPU setup. When peer mappings are not available, system falls back to using zero-copy memory. It can cause kernels, which access unified memory, to run slower. More details can be found at: http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#um-managed-memory
Disabling GPU-Direct RDMA access
Enabling peer-to-peer copy engine and direct load/store access
Intra-node (non peer-to-peer) enabled for rank   0 (gpu=0) with neighbor   1 (gpu=1) dir=0, dim=3
Intra-node (non peer-to-peer) enabled for rank   0 (gpu=0) with neighbor   1 (gpu=1) dir=1, dim=3
Intra-node (non peer-to-peer) enabled for rank   1 (gpu=1) with neighbor   0 (gpu=0) dir=0, dim=3
Intra-node (non peer-to-peer) enabled for rank   1 (gpu=1) with neighbor   0 (gpu=0) dir=1, dim=3
QUDA 1.1.0 (git 1.1.0--sm_60)
CUDA Driver version = 12020
CUDA Runtime version = 12040
Found device 0: Tesla P100-PCIE-16GB
Found device 1: Tesla P100-PCIE-16GB
Using device 0: Tesla P100-PCIE-16GB
WARNING: Data reordering done on GPU (set with QUDA_REORDER_LOCATION=GPU/CPU)
Loaded 105 sets of cached parameters from .cache/tunecache.tsv
Loaded 105 sets of cached parameters from .cache/tunecache.tsv
WARNING: Using device memory pool allocator
WARNING: Using pinned memory pool allocator
cublasCreated successfully
==26722== Warning: Profiling results might be incorrect with current version of nvcc compiler used to compile cuda app. Compile with nvcc compiler 9.0 or later version to get correct profiling results. Ignore this warning if code is already compiled with the recommended nvcc version 
===============round  0 ======================
==26721== Warning: Profiling results might be incorrect with current version of nvcc compiler used to compile cuda app. Compile with nvcc compiler 9.0 or later version to get correct profiling results. Ignore this warning if code is already compiled with the recommended nvcc version 
===============round  0 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :19.940319075 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :19.940329953 sec
## difference: 0.0000000001135480
## difference: 0.0000000001135480
QCU bistabcg: 21.89711528299995 sec
QCU bistabcg: 21.89641681199987 sec
===============round  1 ======================
===============round  1 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :19.645683354 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :19.645693086 sec
## difference: 0.0000000001045851
## difference: 0.0000000001045851
QCU bistabcg: 20.739182002000007 sec
QCU bistabcg: 20.73907274699991 sec
===============round  2 ======================
===============round  2 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :19.840873179 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :19.840851678 sec
## difference: 0.0000000000149274
## difference: 0.0000000000149274
QCU bistabcg: 21.127720211999986 sec
QCU bistabcg: 21.126974921000055 sec
===============round  3 ======================
===============round  3 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :19.725344252 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :19.725618506 sec
## difference: 0.0000000001203742
## difference: 0.0000000001203742
QCU bistabcg: 20.570969692000062 sec
QCU bistabcg: 20.571059808999962 sec
===============round  4 ======================
===============round  4 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :20.120067729 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :20.120142413 sec
## difference: 0.0000000000225673
## difference: 0.0000000000225673
QCU bistabcg: 21.05912265500001 sec
===============round  5 ======================
QCU bistabcg: 21.072318347999953 sec
===============round  5 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :19.689459232 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :19.689595678 sec
## difference: 0.0000000000116104
## difference: 0.0000000000116104
QCU bistabcg: 21.07383245699998 sec
QCU bistabcg: 21.073450217000072 sec
===============round  6 ======================
===============round  6 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :20.989160953 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :20.989087420 sec
## difference: 0.0000000000109656
## difference: 0.0000000000109656
QCU bistabcg: 22.06824342899995 sec
QCU bistabcg: 22.067463855999904 sec
===============round  7 ======================
===============round  7 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :18.501417522 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :18.540867461 sec
## difference: 0.0000000000855012
## difference: 0.0000000000855012
QCU bistabcg: 19.571024380000154 sec
===============round  8 ======================
QCU bistabcg: 19.572416184000076 sec
===============round  8 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :20.124868956 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :20.124813684 sec
## difference: 0.0000000000149742
## difference: 0.0000000000149742
QCU bistabcg: 21.06535257099995 sec
===============round  9 ======================
QCU bistabcg: 21.067287698999962 sec
===============round  9 ======================
Creating Gaussian distrbuted Lie group field with sigma = 1.000000e-01
nccl wilson bistabcg total time: (without malloc free memcpy) :18.646105428 sec
nccl wilson bistabcg total time: (without malloc free memcpy) :18.646234042 sec
## difference: 0.0000000000381425
## difference: 0.0000000000381425
QCU bistabcg: 20.063698421000026 sec
QCU bistabcg: 20.064056764999805 sec
WARNING: Environment variable QUDA_PROFILE_OUTPUT_BASE not set; writing to profile.tsv and profile_async.tsv
Saving 15 sets of cached parameters to .cache/profile_0.tsv
Saving 0 sets of cached profiles to .cache/profile_async_0.tsv

               initQuda Total time =     1.248 secs
                     init     =     1.248 secs ( 99.999%),	 with        2 calls at 6.239e+05 us per call
        total accounted       =     1.248 secs ( 99.999%)
        total missing         =     0.000 secs (  0.001%)

          loadGaugeQuda Total time =     1.213 secs
                 download     =     0.528 secs ( 43.533%),	 with       20 calls at 2.639e+04 us per call
                   upload     =     0.125 secs ( 10.285%),	 with       10 calls at 1.247e+04 us per call
                     init     =     0.491 secs ( 40.521%),	 with       20 calls at 2.457e+04 us per call
                  compute     =     0.068 secs (  5.618%),	 with       20 calls at 3.406e+03 us per call
                     free     =     0.000 secs (  0.014%),	 with       20 calls at 8.300e+00 us per call
        total accounted       =     1.212 secs ( 99.971%)
        total missing         =     0.000 secs (  0.029%)

                endQuda Total time =     0.035 secs

       initQuda-endQuda Total time =   213.905 secs

                   QUDA Total time =     3.293 secs
                 download     =     0.528 secs ( 16.032%),	 with       20 calls at 2.640e+04 us per call
                   upload     =     0.125 secs (  3.788%),	 with       10 calls at 1.247e+04 us per call
                     init     =     1.739 secs ( 52.818%),	 with       22 calls at 7.905e+04 us per call
                  compute     =     0.865 secs ( 26.277%),	 with       30 calls at 2.884e+04 us per call
                     free     =     0.000 secs (  0.005%),	 with       20 calls at 8.150e+00 us per call
        total accounted       =     3.257 secs ( 98.920%)
        total missing         =     0.036 secs (  1.080%)

Device memory used = 1428.0 MiB
Pinned device memory used = 0.0 MiB
Managed memory used = 0.0 MiB
Shmem memory used = 0.0 MiB
Page-locked host memory used = 48.0 MiB
Total host memory used >= 66.0 MiB

==26721== Generated result file: /home/kfutfd/qcu/test/log_x99-Yang_26721.nvvp
==26722== Generated result file: /home/kfutfd/qcu/test/log_x99-Yang_26722.nvvp
~/qcu
